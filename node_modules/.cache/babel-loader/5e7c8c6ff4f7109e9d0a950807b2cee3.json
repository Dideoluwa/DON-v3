{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Desktop/Darasimi files/Online-Mini-Store-REST-API-x-Reactjs-/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/Users/mac/Desktop/Darasimi files/Online-Mini-Store-REST-API-x-Reactjs-/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/mac/Desktop/Darasimi files/Online-Mini-Store-REST-API-x-Reactjs-/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useReducer,useEffect}from'react';import CartContext from'./cart-context';import{jsx as _jsx}from\"react/jsx-runtime\";var defaultCartState={items:[],totalAmount:0};var cartReducer=function cartReducer(state,action){if(action.type==='ADD'){var updatedTotalAmount=state.totalAmount+action.item.price*action.item.amount;var existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.item.id;});var existingCartItem=state.items[existingCartItemIndex];var updatedItem;var updatedItems;if(existingCartItem){updatedItem=_objectSpread(_objectSpread({},existingCartItem),{},{amount:existingCartItem.amount+action.item.amount});updatedItems=_toConsumableArray(state.items);updatedItems[existingCartItemIndex]=updatedItem;}else{updatedItem=_objectSpread({},action.item);updatedItems=state.items.concat(action.item);}// localStorage.setItem('cartItems', JSON.stringify(state.items))\nreturn{items:updatedItems,totalAmount:updatedTotalAmount};}if(action.type==='REMOVE'){var _existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.id;});var existingItem=state.items[_existingCartItemIndex];var _updatedTotalAmount=state.totalAmount-existingItem.price;var _updatedItems;if(existingItem.amount===1){_updatedItems=state.items.filter(function(item){return item.id!==action.id;});}else{var _updatedItem=_objectSpread(_objectSpread({},existingItem),{},{amount:existingItem.amount-1});_updatedItems=_toConsumableArray(state.items);_updatedItems[_existingCartItemIndex]=_updatedItem;}// localStorage.setItem('cartItems', JSON.stringify(state.items))\nreturn{items:_updatedItems,totalAmount:_updatedTotalAmount};}return defaultCartState;};function CartProvider(props){var _useReducer=useReducer(cartReducer,defaultCartState,function(){var localData=localStorage.getItem('items');return localData?JSON.parse(localData):defaultCartState;}),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCart=_useReducer2[1];useEffect(function(){localStorage.setItem('items',JSON.stringify(cartState));},[cartState]);var addItemToCartHandler=function addItemToCartHandler(item){dispatchCart({type:'ADD',item:item});};var removeItemFromCartHandler=function removeItemFromCartHandler(id){dispatchCart({type:'REMOVE',id:id});};var cartContext={items:cartState.items,totalAmount:cartState.totalAmount,addItem:addItemToCartHandler,removeItem:removeItemFromCartHandler};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});}export default CartProvider;","map":{"version":3,"names":["React","useReducer","useEffect","CartContext","defaultCartState","items","totalAmount","cartReducer","state","action","type","updatedTotalAmount","item","price","amount","existingCartItemIndex","findIndex","id","existingCartItem","updatedItem","updatedItems","concat","existingItem","filter","CartProvider","props","localData","localStorage","getItem","JSON","parse","cartState","dispatchCart","setItem","stringify","addItemToCartHandler","removeItemFromCartHandler","cartContext","addItem","removeItem","children"],"sources":["/Users/mac/Desktop/Darasimi files/Online-Mini-Store-REST-API-x-Reactjs-/frontend/src/Components/Store/CartProvider.js"],"sourcesContent":["import React, { useReducer, useEffect } from 'react'\nimport CartContext from './cart-context'\n\n\nlet defaultCartState = {\n    items: [],\n    totalAmount: 0,\n}\n\nlet cartReducer = (state, action) => {\n    if (action.type === 'ADD') {\n        let updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\n        let existingCartItemIndex = state.items.findIndex(\n            item => item.id === action.item.id\n        )\n        let existingCartItem = state.items[existingCartItemIndex]\n        let updatedItem\n        let updatedItems\n\n        if (existingCartItem) {\n            updatedItem = {\n                ...existingCartItem,\n                amount: existingCartItem.amount + action.item.amount\n            }\n            updatedItems = [...state.items]\n            updatedItems[existingCartItemIndex] = updatedItem\n        } else {\n            updatedItem = { ...action.item }\n            updatedItems = state.items.concat(action.item);\n        }\n        // localStorage.setItem('cartItems', JSON.stringify(state.items))\n        return {\n            items: updatedItems,\n            totalAmount: updatedTotalAmount\n        }\n    }\n    if (action.type === 'REMOVE') {\n        let existingCartItemIndex = state.items.findIndex(\n            (item) => item.id === action.id\n        )\n        let existingItem = state.items[existingCartItemIndex]\n        let updatedTotalAmount = state.totalAmount - existingItem.price\n        let updatedItems\n        if (existingItem.amount === 1) {\n            updatedItems = state.items.filter(item => item.id !== action.id);\n        } else {\n            let updatedItem = {\n                ...existingItem,\n                amount: existingItem.amount - 1\n            }\n            updatedItems = [...state.items]\n            updatedItems[existingCartItemIndex] = updatedItem;\n        }\n        // localStorage.setItem('cartItems', JSON.stringify(state.items))\n        return {\n            items: updatedItems,\n            totalAmount: updatedTotalAmount\n        };\n    }\n    return defaultCartState;\n}\n\nfunction CartProvider(props) {\n    let [cartState, dispatchCart] = useReducer(cartReducer, defaultCartState , () =>{\n        const localData = localStorage.getItem('items')\n       return localData ? JSON.parse(localData) : defaultCartState\n    })\n\n    useEffect(() => {\n        localStorage.setItem('items' , JSON.stringify(cartState))\n    }, [cartState])\n\n\n    let addItemToCartHandler = (item) => {\n        dispatchCart({\n            type: 'ADD',\n            item: item\n        })\n    }\n\n    let removeItemFromCartHandler = (id) => {\n        dispatchCart({\n            type: 'REMOVE',\n            id: id\n        })\n    }\n\n    const cartContext = {\n        items: cartState.items,\n        totalAmount: cartState.totalAmount,\n        addItem: addItemToCartHandler,\n        removeItem: removeItemFromCartHandler\n    }\n    return (\n        <CartContext.Provider value={cartContext}>\n            {props.children}\n        </CartContext.Provider>\n    )\n}\n\nexport default CartProvider"],"mappings":"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"},"metadata":{},"sourceType":"module"}