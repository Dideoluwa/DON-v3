{"ast":null,"code":"import _asyncToGenerator from\"/Users/mac/Desktop/Darasimi files/Online-Mini-Store-REST-API-x-Reactjs-/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mac/Desktop/Darasimi files/Online-Mini-Store-REST-API-x-Reactjs-/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/mac/Desktop/Darasimi files/Online-Mini-Store-REST-API-x-Reactjs-/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext,useState,useRef,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import styles from'./product.module.css';import CartContext from\"./Store/cart-context\";import Loader from\"./Loader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Product(){var _products$images,_products$images2,_products$images3,_products$images4;var _useState=useState('1'),_useState2=_slicedToArray(_useState,2),amount=_useState2[0],setAmount=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),products=_useState4[0],setProducts=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),added=_useState6[0],setAdded=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),inputIsValid=_useState10[0],setInputIsValid=_useState10[1];// const [isInitiallyFetched, setIsInitiallyFetched] = useState(false);\nvar _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),imgIndex=_useState12[0],setImgIndex=_useState12[1];var amountInputRef=useRef();var ctx=useContext(CartContext);var _useParams=useParams(),productId=_useParams.productId;var url=\"https://thegorana.herokuapp.com/products/\".concat(productId);useEffect(function(){var getProduct=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);axios.get(url).then(function(response){var data=response.data;setProducts(data);setIsLoading(false);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function getProduct(){return _ref.apply(this,arguments);};}();getProduct();},[url]);// const products = props.Lists.find(prod => String(prod._id) === productId)\nvar addToCartHandler=function addToCartHandler(amount){ctx.addItem({key:products._id,id:products._id,title:products.name,images:products.images[0],amount:amount,price:products.price});};var amountFormHandler=function amountFormHandler(e){e.preventDefault();var enteredAmount=amountInputRef.current.value;var enteredAmountNum=+enteredAmount;if(enteredAmount.trim().length===0||enteredAmountNum<1||enteredAmountNum>9){setInputIsValid(true);setAdded(false);setTimeout(function(){setInputIsValid(false);},2000);return;}else{setInputIsValid(false);}addToCartHandler(enteredAmountNum);setAmount('1');};var amountChangeHandler=function amountChangeHandler(e){setAmount(e.target.value);};var addedToCartHandler=function addedToCartHandler(){setAdded(true);setTimeout(function(){setAdded(false);},2000);};//   useEffect(()=>{\n//     let prev_items = JSON.parse(localStorage.getItem('cart')) || [];\n//     ctx.addItem(prev_items)\n//     setIsInitiallyFetched(true)\n//   },[])\n// useEffect(() => {\n//   if(isInitiallyFetched){\n//     localStorage.setItem(\"cart\", JSON.stringify(ctx.items));\n//     // let c = totalSpent;\n//   }\n// }, [ctx.items , isInitiallyFetched]);\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[isLoading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(\"div\",{className:styles.body1,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.body,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.images,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.imagesInner,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.wrapper,children:/*#__PURE__*/_jsx(\"img\",{src:(_products$images=products.images)===null||_products$images===void 0?void 0:_products$images[imgIndex],alt:products.title})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.imageSmall,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.wrapper2,children:/*#__PURE__*/_jsx(\"img\",{src:(_products$images2=products.images)===null||_products$images2===void 0?void 0:_products$images2[0],alt:products.title,onClick:function onClick(){return setImgIndex(0);}})}),/*#__PURE__*/_jsx(\"div\",{className:styles.wrapper2,children:/*#__PURE__*/_jsx(\"img\",{src:(_products$images3=products.images)===null||_products$images3===void 0?void 0:_products$images3[1],alt:products.title,onClick:function onClick(){return setImgIndex(1);}})}),/*#__PURE__*/_jsx(\"div\",{className:styles.wrapper2,children:/*#__PURE__*/_jsx(\"img\",{src:(_products$images4=products.images)===null||_products$images4===void 0?void 0:_products$images4[2],alt:products.title,onClick:function onClick(){return setImgIndex(2);}})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.descrip,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.name,children:/*#__PURE__*/_jsx(\"h1\",{children:products.name})}),/*#__PURE__*/_jsxs(\"p\",{className:styles.price,children:[\"Price: \\u20A6\",products.price]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.description,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Description: \"}),/*#__PURE__*/_jsx(\"p\",{children:products.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.list,children:[inputIsValid&&/*#__PURE__*/_jsx(\"p\",{children:\"Can't add more than 9 items at once.\"}),added&&/*#__PURE__*/_jsx(\"p\",{children:\"Item added to cart\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:amountFormHandler,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"input\",{ref:amountInputRef,id:products._id,type:\"number\",min:\"1\",max:\"10\",step:\"1\",value:amount,onChange:amountChangeHandler}),/*#__PURE__*/_jsx(\"button\",{onClick:addedToCartHandler,className:styles.button,children:\"Add to cart\"})]})]})]})]})})]});}export default Product;","map":{"version":3,"names":["React","useContext","useState","useRef","useEffect","useParams","axios","styles","CartContext","Loader","Product","amount","setAmount","products","setProducts","added","setAdded","isLoading","setIsLoading","inputIsValid","setInputIsValid","imgIndex","setImgIndex","amountInputRef","ctx","productId","url","getProduct","get","then","response","data","addToCartHandler","addItem","key","_id","id","title","name","images","price","amountFormHandler","e","preventDefault","enteredAmount","current","value","enteredAmountNum","trim","length","setTimeout","amountChangeHandler","target","addedToCartHandler","body1","body","imagesInner","wrapper","imageSmall","wrapper2","descrip","description","list","button"],"sources":["/Users/mac/Desktop/Darasimi files/Online-Mini-Store-REST-API-x-Reactjs-/frontend/src/Components/Product.js"],"sourcesContent":["import React, { useContext, useState, useRef, useEffect } from \"react\"\nimport { useParams } from \"react-router-dom\"\nimport axios from \"axios\"\nimport styles from './product.module.css'\nimport CartContext from \"./Store/cart-context\"\nimport Loader from \"./Loader\"\n\nfunction Product() {\n  let [amount, setAmount] = useState('1')\n  let [products, setProducts] = useState([])\n  let [added, setAdded] = useState(false)\n  let [isLoading, setIsLoading] = useState(false)\n  let [inputIsValid, setInputIsValid] = useState(false)\n  // const [isInitiallyFetched, setIsInitiallyFetched] = useState(false);\n  let [imgIndex, setImgIndex] = useState(0)\n  let amountInputRef = useRef()\n  let ctx = useContext(CartContext)\n\n  const { productId } = useParams()\n  const url = `https://thegorana.herokuapp.com/products/${productId}`\n  useEffect(() => {\n    const getProduct = async () => {\n      setIsLoading(true)\n      axios.get(url).then((response) => {\n        let data = response.data\n        setProducts(data)\n        setIsLoading(false)\n      })\n    }\n    getProduct();\n  }, [url]);\n\n  // const products = props.Lists.find(prod => String(prod._id) === productId)\n\n\n  const addToCartHandler = (amount) => {\n    ctx.addItem({\n      key: products._id,\n      id: products._id,\n      title: products.name,\n      images: products.images[0],\n      amount: amount,\n      price: products.price,\n    });\n  }\n\n  let amountFormHandler = (e) => {\n    e.preventDefault()\n    let enteredAmount = amountInputRef.current.value\n    let enteredAmountNum = +enteredAmount\n\n    if (enteredAmount.trim().length === 0 ||\n      enteredAmountNum < 1 ||\n      enteredAmountNum > 9) {\n      setInputIsValid(true);\n      setAdded(false)\n      setTimeout(() => {\n        setInputIsValid(false)\n      }, 2000)\n      return;\n    } else {\n      setInputIsValid(false);\n    }\n\n    addToCartHandler(enteredAmountNum)\n    setAmount('1')\n  }\n\n  let amountChangeHandler = (e) => {\n    setAmount(e.target.value)\n  }\n  let addedToCartHandler = () => {\n    setAdded(true)\n    setTimeout(() => {\n      setAdded(false)\n    }, 2000)\n  }\n\n  //   useEffect(()=>{\n  //     let prev_items = JSON.parse(localStorage.getItem('cart')) || [];\n  //     ctx.addItem(prev_items)\n  //     setIsInitiallyFetched(true)\n  //   },[])\n\n\n  // useEffect(() => {\n  //   if(isInitiallyFetched){\n  //     localStorage.setItem(\"cart\", JSON.stringify(ctx.items));\n  //     // let c = totalSpent;\n  //   }\n  // }, [ctx.items , isInitiallyFetched]);\n\n  return (\n    <div>\n      {isLoading && <Loader />}\n      <div className={styles.body1}>\n        <div className={styles.body}>\n          <div className={styles.images}>\n            <div className={styles.imagesInner}>\n              <div className={styles.wrapper}>\n                <img src={products.images?.[imgIndex]} alt={products.title}></img>\n              </div>\n              <div className={styles.imageSmall}>\n                <div className={styles.wrapper2}>\n                  <img src={products.images?.[0]} alt={products.title} onClick={() => setImgIndex(0)}></img>\n                </div>\n                <div className={styles.wrapper2}>\n                  <img src={products.images?.[1]} alt={products.title} onClick={() => setImgIndex(1)}></img>\n                </div>\n                <div className={styles.wrapper2}>\n                  <img src={products.images?.[2]} alt={products.title} onClick={() => setImgIndex(2)}></img>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className={styles.descrip}>\n            <div className={styles.name}>\n              <h1>{products.name}</h1>\n            </div>\n            <p className={styles.price}>Price: ₦{products.price}</p>\n            <div className={styles.description}>\n              <h3>Description: </h3>\n              <p>{products.description}</p>\n            </div>\n            <div className={styles.list}>\n              {inputIsValid && <p>Can't add more than 9 items at once.</p>}\n              {added && <p>Item added to cart</p>}\n              <form onSubmit={amountFormHandler}>\n                <label>Quantity:</label>\n                <input\n                  ref={amountInputRef}\n                  id={products._id}\n                  type='number'\n                  min='1'\n                  max='10'\n                  step='1'\n                  value={amount}\n                  onChange={amountChangeHandler}\n                />\n                <button\n                  onClick={addedToCartHandler}\n                  className={styles.button}>Add to cart</button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Product"],"mappings":"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"},"metadata":{},"sourceType":"module"}